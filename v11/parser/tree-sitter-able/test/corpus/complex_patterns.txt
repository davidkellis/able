================
Complex Patterns
================

fn match_patterns(value) {
  value match {
    case Point { x::x_val: i32, y } if x_val > 0 => x_val,
    case Wrapper { item: Point { x, y::y_val: i64 } } => y_val,
    case [head: i32, ...rest] => head
  }
}
---

(source_file
  (function_definition
    (identifier)
    (parameter_list
      (parameter
        (pattern_base
          (identifier))))
    (block
      (expression_statement
        (low_precedence_pipe_expression
          (assignment_expression
            (pipe_expression
              (matchable_expression
                (pipe_operand_base
                  (range_expression
                    (logical_or_expression
                      (logical_and_expression
                        (bitwise_or_expression
                          (bitwise_xor_expression
                            (bitwise_and_expression
                              (equality_expression
                                (comparison_expression
                                  (shift_expression
                                    (additive_expression
                                      (multiplicative_expression
                                        (unary_expression
                                          (exponent_expression
                                            (postfix_expression
                                              (match_expression
                                                (postfix_expression
                                                  (primary_expression
                                                    (identifier)))
                                                (match_clause
                                                  (pattern_base
                                                    (struct_pattern
                                                      (qualified_identifier
                                                        (identifier))
                                                      (struct_pattern_element
                                                        (struct_pattern_field
                                                          (identifier)
                                                          (identifier)
                                                          (type_union
                                                            (type_arrow
                                                              (type_suffix
                                                                (type_prefix
                                                                  (type_atom
                                                                    (type_identifier
                                                                      (qualified_identifier
                                                                        (identifier))))))))))
                                                      (struct_pattern_element
                                                        (struct_pattern_field
                                                          (identifier)))))
                                                  (match_guard
                                                    (low_precedence_pipe_expression
                                                      (assignment_expression
                                                        (pipe_expression
                                                          (matchable_expression
                                                            (pipe_operand_base
                                                              (range_expression
                                                                (logical_or_expression
                                                                  (logical_and_expression
                                                                    (bitwise_or_expression
                                                                      (bitwise_xor_expression
                                                                        (bitwise_and_expression
                                                                          (equality_expression
                                                                            (comparison_expression
                                                                              (shift_expression
                                                                                (additive_expression
                                                                                  (multiplicative_expression
                                                                                    (unary_expression
                                                                                      (exponent_expression
                                                                                        (postfix_expression
                                                                                          (primary_expression
                                                                                            (identifier))))))))
                                                                              (shift_expression
                                                                                (additive_expression
                                                                                  (multiplicative_expression
                                                                                    (unary_expression
                                                                                      (exponent_expression
                                                                                        (postfix_expression
                                                                                          (primary_expression
                                                                                            (number_literal))))))))))))))))))))))
                                                  (low_precedence_pipe_expression
                                                    (assignment_expression
                                                      (pipe_expression
                                                        (matchable_expression
                                                          (pipe_operand_base
                                                            (range_expression
                                                              (logical_or_expression
                                                                (logical_and_expression
                                                                  (bitwise_or_expression
                                                                    (bitwise_xor_expression
                                                                      (bitwise_and_expression
                                                                        (equality_expression
                                                                          (comparison_expression
                                                                            (shift_expression
                                                                              (additive_expression
                                                                                (multiplicative_expression
                                                                                  (unary_expression
                                                                                    (exponent_expression
                                                                                      (postfix_expression
                                                                                        (primary_expression
                                                                                          (identifier))))))))))))))))))))))
                                                (match_clause
                                                  (pattern_base
                                                    (struct_pattern
                                                      (qualified_identifier
                                                        (identifier))
                                                      (struct_pattern_element
                                                        (struct_pattern_field
                                                          (identifier)
                                                          (type_union
                                                            (type_arrow
                                                              (type_suffix
                                                                (type_prefix
                                                                  (type_atom
                                                                    (type_identifier
                                                                      (qualified_identifier
                                                                        (identifier))))))))
                                                          (pattern_base
                                                            (struct_pattern
                                                              (struct_pattern_element
                                                                (struct_pattern_field
                                                                  (identifier)))
                                                              (struct_pattern_element
                                                                (struct_pattern_field
                                                                  (identifier)
                                                                  (identifier)
                                                                  (type_union
                                                                    (type_arrow
                                                                      (type_suffix
                                                                        (type_prefix
                                                                          (type_atom
                                                                            (type_identifier
                                                                              (qualified_identifier
                                                                                (identifier))))))))))))))))
                                                  (low_precedence_pipe_expression
                                                    (assignment_expression
                                                      (pipe_expression
                                                        (matchable_expression
                                                          (pipe_operand_base
                                                            (range_expression
                                                              (logical_or_expression
                                                                (logical_and_expression
                                                                  (bitwise_or_expression
                                                                    (bitwise_xor_expression
                                                                      (bitwise_and_expression
                                                                        (equality_expression
                                                                          (comparison_expression
                                                                            (shift_expression
                                                                              (additive_expression
                                                                                (multiplicative_expression
                                                                                  (unary_expression
                                                                                    (exponent_expression
                                                                                      (postfix_expression
                                                                                        (primary_expression
                                                                                          (identifier))))))))))))))))))))))
                                                (match_clause
                                                  (pattern_base
                                                    (array_pattern
                                                      (typed_pattern
                                                        (pattern_base
                                                          (identifier))
                                                        (type_union
                                                          (type_arrow
                                                            (type_suffix
                                                              (type_prefix
                                                                (type_atom
                                                                  (type_identifier
                                                                    (qualified_identifier
                                                                      (identifier)))))))))
                                                      (array_pattern_rest
                                                        (identifier))))
                                                  (low_precedence_pipe_expression
                                                    (assignment_expression
                                                      (pipe_expression
                                                        (matchable_expression
                                                          (pipe_operand_base
                                                            (range_expression
                                                              (logical_or_expression
                                                                (logical_and_expression
                                                                  (bitwise_or_expression
                                                                    (bitwise_xor_expression
                                                                      (bitwise_and_expression
                                                                        (equality_expression
                                                                          (comparison_expression
                                                                            (shift_expression
                                                                              (additive_expression
                                                                                (multiplicative_expression
                                                                                  (unary_expression
                                                                                    (exponent_expression
                                                                                      (postfix_expression
                                                                                        (primary_expression
                                                                                          (identifier))))))))))))))))))))))))))))))))))))))))))))))
