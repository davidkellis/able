package string_tests

import able.text.string
import able.text.string.{StringBuilder}

fn check_roundtrip() -> void {
  text := "Able!"
  if !(text.len_bytes() == 5) { raise "len_bytes should count UTF-8 bytes" }
  if !(text.len_chars() == 5) { raise "len_chars should count code points" }
  if !(text.len_graphemes() == 5) { raise "len_graphemes should count graphemes" }

  text.substring(0, 4) match {
    case slice: String => {
      if !(slice == "Able") { raise "substring should slice by Unicode scalars" }
    },
    case err => { raise err }
  }

  builder := StringBuilder.new()
  builder.push_string("Hi")
  builder.push_char('!')
  builder.finish() match {
    case result: String => {
      if !(result == "Hi!") { raise "StringBuilder should emit a built-in string" }
    },
    case err => { raise err }
  }
}

fn main() -> void {
  check_roundtrip()
}

main()
