package parity.examples.patterns

struct Entry {
  label: String,
  value: i32
}

fn summarize(entries: Array Entry) -> i32 {
  total := 0
  for entry in entries {
    { label::label, value::entryValue } := entry
    print(`record ${label}: ${entryValue}`)
    total = total + entryValue
  }
  total
}

fn highlight(entries: Array Entry) -> void {
  ## Use destructuring in a match to pull specific fields
  for entry in entries {
    entry match {
      case Entry { label::label, value::value } if value > 5 => print(`priority ${label}`),
      case Entry { label::label, value::value } => print(`normal ${label} (${value})`)
    }
  }
}

fn main() {
  entries := [
    Entry { label: "apples", value: 3 },
    Entry { label: "bananas", value: 7 },
    Entry { label: "cherries", value: 5 }
  ]
  total := summarize(entries)
  print(`total ${total}`)
  highlight(entries)
}
