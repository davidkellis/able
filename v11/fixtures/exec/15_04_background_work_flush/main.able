package exec_15_04_background_work_flush

## Semantics: program exit does not wait for background procs to complete.
struct Channel { handle: i64 }

methods Channel {
  fn receive(self: Self) { __able_channel_receive(self.handle) }
}

fn make_channel() -> Channel {
  handle := __able_channel_new(0)
  Channel { handle: handle }
}

fn main() -> void {
  channel := make_channel()
  proc {
    channel.receive()
    print("background")
  }
  print("main done")
}
